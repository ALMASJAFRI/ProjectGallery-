{% load static %}
<div class="flex flex-col w-full max-w-4xl gap-4 mb-3 mt-5">    
  <!-- Main Card with Image and Details -->
  <div class="card card-side bg-base-100 shadow-sm w-full">  
    <figure class="w-1/2">  
      <img class="h-full w-full object-cover"   
           src="{{ item.image.url }}"   
           alt="{{item.category}}">  
    </figure>  
    <div class="card-body w-1/2 border border-gray-300 rounded-md overflow-visible">  
      <div>  
        <h2 class="text-4xl font-bold text-center">{{item.project}}</h2>  
      </div>  
      <div>  
        <h2 class="mt-3 mb-3 text-2xl font-bold text-right">CATEGORY : {{item.category}}</h2>  
      </div> 
      <div>  
        <h2 class="mt-3 mb-3 text-2xl font-bold text-right">DESCRIPTION : {{item.description}}</h2>  
      </div>        

      <div class="mt-2 mb-2">  
        <h2 class="mt-3 mb-3 text-2xl font-bold">Select Variant</h2>  
        <form method="POST"   
              hx-post="{% url 'price_differ' item.id %}"   
              hx-target="#price"   
              hx-swap="innerHTML"  
              hx-trigger="change">  
          {% csrf_token %}  
          <select name="var" class="select select-bordered w-full md:w-72 text-xl mb-3">  
            <option value="DOC+CODE">DOC+CODE</option>  
            <option value="ONLY CODE">ONLY CODE</option>  
            <option value="ONLY DOC">ONLY DOC</option>  
          </select>  
        </form>  
      </div>  

      <div class="flex justify-end" id="price">        
        <h1 class="text-2xl font-bold text-green-600 mb-0">â‚¹{{ item.price }}/-</h1>  
        <div class="card-actions justify-end mt-3">  
          <a class="btn btn-success text-2xl" href="{% url 'initiateorder' item.id item.price %}">Buy Now</a>  
        </div>  
      </div>  
    </div>
  </div>  

  <!-- Features + Purchased cards in same row -->
  <div class="flex flex-col md:flex-row gap-4 w-full">    
    <!-- Features card -->
       <div class="card bg-blue-100 text-black-content w-full md:w-2/3">  
       <div id="featurecard">
       {% include 'partials/features.html' %} 
      </div>
        </div>  
    <!-- Purchased card -->
    <div class="card w-full md:w-1/3">  
      <div class="stats shadow h-full">  
        <div class="stat text-center">  
          <div class="stat-title text-3xl font-bold">Purchased!!</div>  
          <div class="stat-value">{{item.purchased}}</div>  
          <div class="stat-desc">These are total purchased till now</div>  
        </div>  
      </div>  
    </div>  
  </div>  

  <!-- Reviews Section -->
  <div class="mt-6 w-full">  
    <h2 class="text-3xl font-bold text-center">Reviews</h2>  
    <div class="card bg-black text-white w-full h-48 mt-3" id="reviews">  
      <div class="flex flex-col gap-2 h-full overflow-y-auto p-2">  
        {% if reviews %}
        {% for review in reviews %}
        <div class="chat chat-start">
          <div class="chat-image avatar">
            <div class="w-10 rounded-full">
              {% if review.user.photo %}
             <img src="{{ review.user.photo.url }}" alt="Tailwind CSS chat bubble component" />
             {% else %}
             <img src="{% static 'images/user-circle-isolated-icon-round-600nw-2459622791.jpg' %}" alt="Tailwind CSS chat bubble component" />
             {% endif %}
            </div>
          </div>
          <div class="chat-bubble bg-gray-800 text-white">{{review.review}}</div>
        </div>
        {% endfor %}
        {% endif %}
      </div>
    </div>  
  </div>  

  <!-- Add Review Section -->
  <div class="card w-full mt-6">  
    <h2 class="text-2xl font-bold text-center">Add Review!!</h2>  
    <form   
         hx-post="{% url 'review' item.id %}"   
         hx-target="#reviews"   
         hx-swap="innerHTML"  
         method="POST"  
         class="p-4 flex flex-col gap-3">  
         {% csrf_token %}  
         <input type="text"   
                class="input input-bordered w-full"   
                placeholder="Type here"   
                name="review" />  
         <button type="submit" class="btn btn-success w-48 z-10">Submit</button>  
    </form>  
  </div>
</div>